<div
  class="content-box"
  style="max-width: 1126px; margin: 0px -12px; padding: 0 12px"
>
  <div class="grid-row">
    <div
      class="col-xs-12 col-md-12"
      style="overflow: hidden; position: relative"
    >
      <img
        class="rotate-180 opacity-half"
        style="height: 60px; vertical-align: middle"
        role="presentation"
        src="https://content.bridgepointeducation.com/curriculum/file/f881c28d-b8b7-4695-a677-bed16afbf12d/1/Shadow.png"
        alt=" "
        width="1051"
        height="60"
        data-decorative="true"
      />
      <div class="header-bar color2-gradient" style="padding: 35px 40px 30px">
        <h1>Block 32 Workshop: Gamestore</h1>
      </div>
      <div
        class="mobile-hide"
        style="position: absolute; top: 30px; margin: 0 45px"
      >
        <div
          class="accent-header color1-gradient letter-spaced uppercase"
          style="padding: 5px 30px 5px; background: #fff"
        >
          <h2>Unit 4</h2>
        </div>
        <img
          class=""
          style="width: 0; min-width: 100%; height: 40px"
          role="presentation"
          src="https://content.bridgepointeducation.com/curriculum/file/f881c28d-b8b7-4695-a677-bed16afbf12d/1/Shadow.png"
          alt=" "
          width="177"
          height="40"
          data-decorative="true"
        />
      </div>
      <div>
        <div style="padding: 0 0 20px">
          <img
            class=""
            style="height: 40px; width: 100%"
            role="presentation"
            src="https://content.bridgepointeducation.com/curriculum/file/f881c28d-b8b7-4695-a677-bed16afbf12d/1/Shadow.png"
            alt=" "
            width="1051"
            height="40"
            data-decorative="true"
          />
        </div>
      </div>
    </div>
  </div>
</div>
<div
  class="content-box"
  style="overflow: hidden; margin-top: -30px; padding: 0 2%"
>
  <h2 id="overview">Overview</h2>
  <p>
    Complete the following coding challenges using what you know about CRUD
    operations and asynchronous JavaScript. You will be creating a RESTful API
    to serve data to a PostgreSQL database.
  </p>
  <h3 id="creatingawebsite">Directions</h3>
  <p>
    We have some starter code and it is our job to fix the problems with the
    Gamestore API. In this workshop, we will be troubleshooting issues using
    Postman and the available software.
  </p>
  <ol>
    <li>Navigate to the GitHub repo for Block 32: Workshop</li>
    <li>
      Using what we know about CRUD operations and other asynchronous JavaScript
      basics, pseudocode the prompts found in each tab below.
    </li>
    <li>
      After coming up with logical solutions for each prompt, begin the
      assignment.
    </li>
    <li>
      Clone the starter repository found here, navigate to the directory, and
      run `npm install` from the terminal.
    </li>
    <li>
      <p>
        The available database has two tables (video games and board games) with
        CRUD operations. With video games, for example:
      </p>
      <ul>
        <li>Get all video games</li>
        <li>Get video games by id</li>
        <li>Add video games</li>
        <li>Update video games by id</li>
        <li>Delete video games by id</li>
      </ul>
      <p>
        *Stretch Goal* - Server an index.html or React application that makes it
        a full stack web application.
      </p>
    </li>
  </ol>
  <p>There are 4<strong>&nbsp;tabs&nbsp;</strong>below.</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <div class="enhanceable_content tabs">
    <ul>
      <li><a href="#fragment-2">GET - all video games</a></li>
      <li><a href="#fragment-3">GET - video game by id</a></li>
      <li><a href="#fragment-4">POST - create video game</a></li>
      <li><a href="#fragment-5">PUT - update video game</a></li>
      <li><a href="#fragment-6">DELETE - delete video game</a></li>
    </ul>
    <div id="fragment-2">
        <h2>GET - all video games</h2>
        <p>Write a function that gets a video game by id from the database.</p>
        <p>Hint: Use the <code>getAllVideoGames()</code> function.</p>
        <details>
            <summary>Click to see solution</summary>
            <pre><code>
async function getAllVideoGames() {
    try {
        const { rows: videoGames } = await client.query(`
            SELECT * FROM videoGames;
        `);
        return videoGames;
    } catch (error) {
        throw error; 
    }
}
</code></pre>
        </details>
    </div>

    <div id="fragment-3">
        <h2>GET - video game by id</h2>
        <p>Write a function that gets a video game by id from the database.</p>
        <p>Hint: Use the <code>getVideoGameById()</code> function.</p>
        <details>
            <summary>Click to see solution</summary>
            <pre><code>
                router.get('/:id', async (req, res, next) => {
                    try {
                        const videoGame = await getVideoGameById(req.params.id);
                        res.send(videoGame);
                    } catch (error) {
                        next(error);
                    }
                });
                                      
                    </code></pre>
        </details>
    </div>

    <div id="fragment-4">
        <h2>POST - create video game</h2>
        <p>Write a function that creates a video game in the database.</p>
        <p>Hint: Use the <code>createVideoGame()</code> function.</p>
        <details>
            <summary>Click to see solution</summary>
            <pre><code>
// the method is incorrect and should be "post"; not "patch"                
router.post('/', async (req, res, next) => {
...
});
            </code></pre>
        </details>

    </div>

    <div id="fragment-5">
        <h2>PUT - update video game</h2>
        <p>Write a function that updates a video game in the database.</p>
        <p>Hint: Use the <code>updateVideoGame()</code> function.</p>
        <details>
            <summary>Click to see solution</summary>
            <pre><code>
                router.put('/:id', async (req, res, next) => {
                    try {
                        const videoGame = await updateVideoGame(req.params.id, req.body);
                        res.send(videoGame);
                    } catch (error) {
                        next(error);
                    }
                });

            </code></pre>
        </details>
    </div>

    <div id="fragment-6">
        <h2>DELETE - delete video game</h2>
        <p>Write an asynchronous database query function that deletes a video game from the database.</p>
        <p>Hint: Use the <code>deleteVideoGame()</code> function.</p>
        <details>
            <summary>Click to see solution</summary>
            <pre><code>
async function deleteVideoGame(id) {
    try {
        const { rows: [videoGame] } = await client.query(`
            DELETE FROM videoGames
            WHERE id=$1
            RETURNING *;
        `, [id]);
        return videoGame;
    } catch (error) {
        throw error;
    }
}
            </code></pre>
        </details>



      